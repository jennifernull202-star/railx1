üö® THE RAIL EXCHANGE‚Ñ¢ ‚Äî FULL PROJECT BLUEPRINT (FINAL + COMPLETE)
Opus MUST read and understand this ENTIRE structure BEFORE writing ANY code.

This blueprint defines:

All folders

All files

All dashboards

All modules

All marketplace categories

All layouts

All component groups

There is NO guessing once Opus has this.

===========================================
‚≠ê 1. PROJECT ROOT STRUCTURE
===========================================
/
‚îú‚îÄ‚îÄ app/
‚îú‚îÄ‚îÄ components/
‚îú‚îÄ‚îÄ dashboard/
‚îú‚îÄ‚îÄ lib/
‚îú‚îÄ‚îÄ models/
‚îú‚îÄ‚îÄ public/
‚îî‚îÄ‚îÄ utils/

===========================================
‚≠ê 2. APP ROUTER STRUCTURE (Next.js 14)
===========================================
app/
  layout.tsx                ‚Üê Global layout (required)
  page.tsx                  ‚Üê Homepage

  auth/
    layout.tsx
    login/page.tsx
    register/page.tsx
    forgot-password/page.tsx

  dashboard/
    layout.tsx              ‚Üê Unified dashboard layout
    components/
      Sidebar.tsx
      Header.tsx
      ModuleWrapper.tsx
    modules/
      buyer/page.tsx
      seller/page.tsx
      contractor/page.tsx
      admin/page.tsx
    contractor/
      setup/page.tsx

  marketplace/
    create/page.tsx
    [id]/page.tsx
    category/
      [slug]/page.tsx
      [slug]/layout.tsx
      components/
        CategoryHeader.tsx
        Filters.tsx
        ListingsGrid.tsx

  search/
    page.tsx

===========================================
‚≠ê 3. GLOBAL COMPONENTS (REUSABLE)
===========================================
components/
  ui/                      ‚Üê All ShadCN components
  forms/
    InputField.tsx
    SelectField.tsx
    ImageUpload.tsx
  cards/
    ListingCard.tsx
    ContractorCard.tsx
    CategoryTile.tsx
  search/
    GlobalSearchBar.tsx
    FilterBar.tsx
  maps/
    MapWrapper.tsx
    ContractorMap.tsx

===========================================
‚≠ê 4. LIB (BACKEND UTILITIES)
===========================================
lib/
  db.ts                     ‚Üê MongoDB connection handler
  auth.ts                   ‚Üê NextAuth config
  stripe/
    client.ts               ‚Üê Stripe client
    webhook.ts              ‚Üê Webhook handler for subscriptions
  validation/
    listingValidation.ts
    contractorValidation.ts

===========================================
‚≠ê 5. MODELS (DATABASE)
===========================================
models/
  User.ts
  ContractorProfile.ts
  Listing.ts
  AddOnPurchase.ts
  Message.ts
  Notification.ts
  SavedSearch.ts
  Watchlist.ts

===========================================
‚≠ê 6. DASHBOARD ARCHITECTURE (UNIFIED)
===========================================
dashboard/
  utils/
    getNavigationItems.ts   ‚Üê Role-based navigation builder
    checkContractorSetup.ts ‚Üê Forces setup if needed

MUST HAVE MODULES:
dashboard/modules/
  buyer/
    page.tsx
  seller/
    page.tsx
  contractor/
    page.tsx
  admin/
    page.tsx

CONTRACTOR SETUP (MANDATORY):
dashboard/contractor/setup/
  page.tsx
  components/
    BusinessInfoForm.tsx
    ServicesForm.tsx
    RegionsForm.tsx
    DocumentsForm.tsx
    EquipmentForm.tsx

===========================================
‚≠ê 7. MARKETPLACE CATEGORY BLUEPRINT
===========================================
Supported categories:
Hi-Rail Vehicles
Locomotives
Rail Equipment & Tools
Track Maintenance Equipment
Materials (rail, tie plates, spikes)
Rail Cars
Attachments
Rentals
Contractors For Hire
Rail Services

Category folder structure:
app/marketplace/category/[slug]/
  page.tsx
  layout.tsx
  components/
    CategoryHeader.tsx
    Filters.tsx
    ListingsGrid.tsx

===========================================
‚≠ê 8. MARKETPLACE LISTINGS (CREATION + DETAIL)
===========================================
Create Listing Page
/marketplace/create/page.tsx

Listing Detail Page
/marketplace/[id]/page.tsx

===========================================
‚≠ê 9. SEARCH SYSTEM
===========================================
app/search/page.tsx
api/search/route.ts
components/search/FilterBar.tsx
components/search/GlobalSearchBar.tsx
components/maps/ContractorMap.tsx


Filters depend on category.

===========================================
‚≠ê 10. VERIFIED CONTRACTOR SYSTEM ($24/month)
===========================================
Contractor model fields:
verified: boolean
verificationStatus: "unverified" | "pending" | "verified"
verificationSubscriptionId: string

Stripe subscription integration:
lib/stripe/webhook.ts:
  - checkout.session.completed
  - customer.subscription.created
  - customer.subscription.updated
  - customer.subscription.deleted

Dashboard tile:
/dashboard/modules/contractor/components/VerificationTile.tsx

===========================================
‚≠ê 11. ADMIN DASHBOARD (FULL ENTERPRISE PANEL)
===========================================
dashboard/modules/admin/
  page.tsx
  Users.tsx
  Listings.tsx
  ContractorVerification.tsx
  AddOnRevenue.tsx
  StripePayments.tsx
  MarketplaceAnalytics.tsx
  Categories.tsx
  Moderation.tsx
  SystemLogs.tsx


Admin MUST see:

MRR

Add-on revenue

Verified contractor revenue

Subscription churn

Search trends

Top listings

Top contractors

===========================================
‚≠ê 12. API ROUTES (MANDATORY)
===========================================
api/
  auth/[...nextauth]/route.ts
  listings/
    route.ts
    [id]/route.ts
  contractors/
    setup/route.ts
    [id]/route.ts
  addons/purchase/route.ts
  messages/
    route.ts
    thread/[id]/route.ts
  search/route.ts
  watchlist/route.ts
  savedsearches/route.ts

===========================================
‚≠ê 13. PUBLIC ASSETS
===========================================
public/
  favicon.ico
  logos/
    rail-exchange-logo.svg
    contractor-verified.svg
  placeholders/
    listing-no-image.png

===========================================
‚≠ê 14. WHAT YOU TELL OPUS (CRITICAL)
===========================================

Copy/paste this:

**‚ÄúOpus, before writing ANY code, you MUST fully understand and adopt this COMPLETE PROJECT BLUEPRINT.
This blueprint defines ALL required files, folders, dashboards, components, modules, marketplace categories, and layouts.

You are NOT allowed to deviate from this structure.

Confirm that you understand the entire blueprint BEFORE starting implementation.‚Äù**